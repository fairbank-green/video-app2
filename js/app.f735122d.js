(function(){"use strict";var e={8420:function(e,t,i){var o=i(9242),s=i(3396),l=i(7139);const n={class:"app has-background-danger-light has-text-danger"},r={class:"top has-background-danger-light"},d={class:"columns"},c={class:"column is-4 is-flex is-align-items-center is-justify-content-center"},a={key:0},u={class:"column is-4 is-flex is-align-items-center is-justify-content-center"},h={class:"title has-text-danger is-size-1"},p={key:0,class:"column is-4 is-flex is-align-items-center is-justify-content-center"},y={key:0,class:"video-selection columns is-multiline"};function m(e,t,i,o,m,v){const g=(0,s.up)("VideoSelect"),f=(0,s.up)("SelectedVideos");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",r,[(0,s._)("div",d,[(0,s._)("div",c,[m.showSelectedVideos?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",a,"You have selected "+(0,l.zw)(v.selectedVideosDuration)+" of your "+(0,l.zw)(m.totalDurationLimit)+" songs",1))]),(0,s._)("div",u,[(0,s._)("h1",h,(0,l.zw)(m.name)+"'s Songs",1)]),m.showSelectedVideos?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",p,[v.playPossible?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"button is-danger",onClick:t[0]||(t[0]=(...e)=>v.playSelectedVideos&&v.playSelectedVideos(...e))},"Play")):(0,s.kq)("",!0)]))])]),m.showSelectedVideos?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.videos,((e,t)=>((0,s.wg)(),(0,s.j4)(g,{key:t,video:e,isSelected:m.selectedVideos.includes(e),onToggleSelection:v.toggleVideoSelection,class:"column is-4"},null,8,["video","isSelected","onToggleSelection"])))),128))])),m.showSelectedVideos?((0,s.wg)(),(0,s.j4)(f,{key:1,selectedVideos:m.selectedVideos},null,8,["selectedVideos"])):(0,s.kq)("",!0)])}i(560);var v=i(4161);const g={class:"selected-videos"},f={class:"columns is-multiline"};function b(e,t,i,o,l,n){const r=(0,s.up)("VideoPlayer");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.selectedVideos,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"video-container column is-4"},[e.watched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,video:e,index:t},null,8,["video","index"]))])))),128))])])}const w={class:"video-player",allowfullscreen:"allowfullscreen"},V=["id"];function S(e,t,i,o,n,r){return(0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["wrapper",{progress:n.inProgress}]),onClick:t[0]||(t[0]=(...e)=>r.handleVideoClick&&r.handleVideoClick(...e)),allowfullscreen:"allowfullscreen"},[(0,s._)("div",w,[(0,s._)("div",{id:n.playerId},null,8,V)])],2)}var k={name:"VideoPlayer",props:{video:{type:Object,required:!0},index:{type:Number,required:!0}},data(){return{playerId:"youtube-player"+this.index,player:null,fullscreen:!1,inProgress:!1}},computed:{embeddedUrl(){const e=this.extractVideoId(this.video.url);return`https://www.youtube.com/embed/${e}`},thumbnailUrl(){const e=this.extractVideoId(this.video.url);return`https://img.youtube.com/vi/${e}/0.jpg`}},methods:{extractVideoId(e){const t=e.match(/(?:\/embed\/|v=|\/\d{2,4}\/|youtu\.be\/|\/v\/|\/e\/|\/u\/\d{1,2}\/|\/embed\/|\/v\/|e\/|u\/\d{1,2}\/|^youtu\.be\/)([^#?\s]+)/);return t&&11===t[1].length?t[1]:null},onPlayerReady(e){const t=document.getElementById(this.playerId).parentNode;t.style.backgroundImage="url("+this.thumbnailUrl+")"},onPlayerStateChange(e){const t=document.getElementById(this.playerId).parentNode.parentNode;document.getElementById(this.playerId),document.getElementById(this.playerId).parentNode.querySelector(".play");switch(e.data){case 0:document.exitFullscreen(),this.fullscreen=!1,this.inProgress=!1,this.video.watched=!0;break;case 1:setTimeout((()=>{}),300),t.requestFullscreen(),this.fullscreen=!0,this.inProgress=!0;break;case 2:document.exitFullscreen(),this.fullscreen=!1;break;case 5:setTimeout((()=>{}),300),t.requestFullscreen(),this.fullscreen=!0;break}},initYouTubePlayer(){const e=this.extractVideoId(this.video.url);this.player=new YT.Player(this.playerId,{height:"100%",width:"100%",videoId:e,playerVars:{rel:0,iv_load_policy:3,controls:0},events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}})},handleVideoClick(){document.getElementById(this.playerId);this.player&&this.player.getPlayerState()===YT.PlayerState.PLAYING?this.player.pauseVideo():(this.player&&this.player.getPlayerState()===YT.PlayerState.PAUSED||this.player&&this.player.getPlayerState()===YT.PlayerState.CUED)&&this.player.playVideo()},hideElement(e){e.style.width="0%",e.style.height="0%"},showElement(e){e.style.width="100%",e.style.height="100%"}},mounted(){if("undefined"!==typeof YT)this.initYouTubePlayer();else{const e=5;let t=0;const i=()=>{"undefined"!==typeof YT?this.initYouTubePlayer():t<e?(t++,setTimeout(i,1e3)):console.error("YouTube API failed to load after multiple retries")};i()}}},P=i(89);const x=(0,P.Z)(k,[["render",S],["__scopeId","data-v-2e0cfe3c"]]);var I=x,_={name:"SelectedVideos",props:{selectedVideos:{type:Array,required:!0}},components:{VideoPlayer:I},methods:{getEmbeddedUrl(e){const t=this.extractVideoId(e.url);return`https://www.youtube.com/embed/${t}`},extractVideoId(e){const t=e.match(/(?:\/embed\/|v=|\/\d{2,4}\/|youtu\.be\/|\/v\/|\/e\/|\/u\/\d{1,2}\/|\/embed\/|\/v\/|e\/|u\/\d{1,2}\/|^youtu\.be\/)([^#?\s]+)/);return t&&11===t[1].length?t[1]:null}}};const D=(0,P.Z)(_,[["render",b],["__scopeId","data-v-009d23ea"]]);var T=D;const j={class:"container"},C=["src"];function E(e,t,i,o,n,r){return(0,s.wg)(),(0,s.iD)("div",j,[(0,s._)("div",{class:"block",onClick:t[0]||(t[0]=(...e)=>r.toggleSelection&&r.toggleSelection(...e))},[(0,s._)("div",{class:(0,l.C_)(["video-select",{selected:i.isSelected}])},[(0,s._)("p",null,"This video counts as "+(0,l.zw)(this.video.value),1),(0,s._)("img",{src:r.thumbnailUrl,alt:"Video Thumbnail"},null,8,C)],2)])])}var O={name:"VideoSelect",props:{video:{type:Object,required:!0},isSelected:Boolean},computed:{thumbnailUrl(){const e=this.extractVideoId(this.video.url);return`https://img.youtube.com/vi/${e}/0.jpg`}},methods:{extractVideoId(e){const t=e.match(/(?:\/embed\/|v=|\/\d{2,4}\/|youtu\.be\/|\/v\/|\/e\/|\/u\/\d{1,2}\/|\/embed\/|\/v\/|e\/|u\/\d{1,2}\/|^youtu\.be\/)([^#?\s]+)/);return t&&11===t[1].length?t[1]:null},toggleSelection(){this.$emit("toggle-selection",this.video)}}};const q=(0,P.Z)(O,[["render",E],["__scopeId","data-v-018ebc08"]]);var U=q,Y={name:"App",data(){return{videos:[],selectedVideos:[],totalDurationLimit:Number,showSelectedVideos:!1,name:""}},components:{SelectedVideos:T,VideoSelect:U},computed:{playPossible(){return this.selectedVideosDuration<=this.totalDurationLimit},selectedVideosDuration(){return this.selectedVideos.reduce(((e,t)=>e+parseFloat(t.value)),0)}},methods:{async fetchVideoUrls(){try{const e=await v.Z.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vRp17gc4isgUx4lS9joSFBbE-82O1JetltGyzHGr4ge93bUzEHIavTzNfvzMdx3qPGOgGxM6Munei--/pub?output=csv");let t=e.data.split("\r\n"),i=t.splice(0,5);this.name=i[1].split(",")[1],this.totalDurationLimit=Number(i[2].split(",")[1]);let o=t.shift().split(",").map((e=>e.toLowerCase()));o[2]="value",this.videos=t.map((e=>{let t=e.split(","),i={};return t.forEach(((e,t)=>{i[o[t]]=e.replaceAll(";","\n"),i["watched"]=!1})),i}))}catch(e){console.error("Error fetching video URLs",e)}},getEmbeddedUrl(e){const t=this.extractVideoId(e.url);return`https://www.youtube.com/embed/${t}`},extractVideoId(e){const t=e.match(/(?:\/embed\/|v=|\/\d{2,4}\/|youtu\.be\/|\/v\/|\/e\/|\/u\/\d{1,2}\/|\/embed\/|\/v\/|e\/|u\/\d{1,2}\/|^youtu\.be\/)([^#?\s]+)/);return t&&11===t[1].length?t[1]:null},playSelectedVideos(){this.selectedVideosDuration>this.totalDurationLimit?alert("Total duration exceeds 40 minutes. Please select fewer videos."):this.showSelectedVideos=!0},toggleVideoSelection(e){const t=this.selectedVideos.indexOf(e);-1!==t?this.selectedVideos.splice(t,1):this.selectedVideos.push(e)}},mounted(){this.fetchVideoUrls()}};const z=(0,P.Z)(Y,[["render",m]]);var N=z;(0,o.ri)(N).mount("#app")}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,i),l.exports}i.m=e,function(){var e=[];i.O=function(t,o,s,l){if(!o){var n=1/0;for(a=0;a<e.length;a++){o=e[a][0],s=e[a][1],l=e[a][2];for(var r=!0,d=0;d<o.length;d++)(!1&l||n>=l)&&Object.keys(i.O).every((function(e){return i.O[e](o[d])}))?o.splice(d--,1):(r=!1,l<n&&(n=l));if(r){e.splice(a--,1);var c=s();void 0!==c&&(t=c)}}return t}l=l||0;for(var a=e.length;a>0&&e[a-1][2]>l;a--)e[a]=e[a-1];e[a]=[o,s,l]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,l,n=o[0],r=o[1],d=o[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(d)var a=d(i)}for(t&&t(o);c<n.length;c++)l=n[c],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(a)},o=self["webpackChunkyoutube_app"]=self["webpackChunkyoutube_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(8420)}));o=i.O(o)})();
//# sourceMappingURL=app.f735122d.js.map